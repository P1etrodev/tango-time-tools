<div id="main">
  <header>
    @if (mode === "timer") {
    <h1 id="timer" [ngStyle]="timerService.colors">
      {{ timerService.timer$ | async }}
    </h1>
    } @else {
    <h1 id="timer" [ngStyle]="timerService.colors">
      {{ clockService.clock$ | async }}
    </h1>
    }
    <div id="mode-selector">
      <button
        [ngClass]="{ active: mode === 'timer' }"
        (click)="changeMode('timer')"
        [disabled]="clockService.isStarted || timerService.isStarted"
      >
        <ng-icon name="iconoirTimer"></ng-icon>
        Timer
      </button>
      <button
        [ngClass]="{ active: mode === 'clock' }"
        (click)="changeMode('clock')"
        [disabled]="clockService.isStarted || timerService.isStarted"
      >
        <ng-icon name="iconoirClock"></ng-icon>
        Clock
      </button>
    </div>
    <div id="controls">
      @if (mode === "timer") {
      <timer-controls></timer-controls>
      } @else {
      <clock-controls></clock-controls>
      }
    </div>
  </header>
  @if (mode === "timer") {
  <gifts></gifts>
  } @else if(clockService.records.length) {
  <div id="container">
    <table id="records">
      <tr class="table-header">
        <th>Created at</th>
        <th>Record</th>
        <th>Time</th>
        <th>
          <button (click)="clockService.deleteRecord()">Clear?</button>
        </th>
      </tr>
      @for (record of clockService.records; track $index) {
      <tr class="record-row">
        <td>{{ record.createdAt }}</td>
        <td>
          <input
            type="text"
            [(ngModel)]="record.name"
            (change)="clockService.saveRecords()"
          />
        </td>
        <td>{{ record.time }}</td>
        <td>
          <button (click)="clockService.deleteRecord(record.id)">
            <ng-icon name="iconoirXmark"></ng-icon>
          </button>
        </td>
      </tr>
      }
    </table>

    <!-- Tabla de EstadÃ­sticas -->
    <table id="stats">
      <tr>
        <td>Best time</td>
        <td class="best-time">{{ clockService.stats.min }}</td>
      </tr>
      <tr>
        <td>Worst time</td>
        <td class="worst-time">{{ clockService.stats.max }}</td>
      </tr>
      <tr>
        <td>Average</td>
        <td class="avg-time">{{ clockService.stats.avg }}</td>
      </tr>
    </table>
  </div>
  }
</div>
